# Managed by Puppet
#

<%=
  scope.function_sub_template_call([
    'rsyslogv8/config/action.erb',
    {
      'action' => {
        'name'             => "ship-#{@title}",
        'type'             => @_omodule,
        'target'           => @remote_host,
        'port'             => @remote_port,
        'ssl'              => @override_ssl,
        'ssl_cert'         => @override_ssl_cert,
        'ssl_ca'           => @override_ssl_ca,
        'ssl_key'          => @override_ssl_key,
        'auth'             => @remote_auth,
        'authorised_peers' => @_remote_authorised_peers,
        'protocol'         => @protocol,
        'queue'            => {
          'type'             => @_queue_mode,
          'size_limit'       => @queue_size_limit,
          'enqueue_timeout'  => @enqueue_timeout,
          'batch_size'       => @queue_batch_size,
          'filename'         => @_queue_disk ? @queue_filename : nil,
          'max_disk_space'   => @queue_max_disk_space,
          'save_on_shutdown' => @queue_save_on_shutdown,
        }
      }
    }
  ])
-%>
